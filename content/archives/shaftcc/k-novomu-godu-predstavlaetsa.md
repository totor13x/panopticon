---
title: К Новому году представляется
date: 2019-12-29
---

Здравствуйте, это первая полноценная запись для блога Шафта.

Для начала хочу всех поздравить с наступающим Новым Годом и провести краткую экскурсию. Что произошло за этот год? Да на самом деле много чего. В уходящем году множество изменений коснулось самой начинки Shaft.CC и это довольно грустный момент. Я старался довести новую структуру Шафта до годного состояния, но давайте вернемся к началу уходящего года и начнем историю:

Думаю многие в курсе: в январе я пребывал по месту службы и к этому времени было видно, что серверная часть Shaft.CC начала сильно сбоить. Ломались инвентари, ломался счетчик онлайна, не было обновлений около полугода и все это накапливалось. Однако я все еще был в армии и поделать что-то с этим было очень сложно. [@M0NstR.](http://steamcommunity.com/profiles/76561198056127769) заменял меня, но его кругозор в плане кодинга был узкий и взаимодействовать с моим движком сайта, серверов было крайне сложно.

В феврале я попал в военную больницу, и хоть смартфон у меня был, писать обновления я также не мог. В большей степени в сети был Анирон, а Монстр решал те проблемные вопросы, которые Ани не мог решить. Для меня же возможность постоянно сидеть в сети позволяла и тоже поучаствовать в разных разборках и, хотя бы немного, отойти от армейской службы как таковой.

Март. С марта я понял, что понятие shaft.im себя изживает из-за негативного восприятия проекта как багнутого куска дерьма и мне пришла долбанутая идея переродить shaft.im в Shaft.CC переделав всю структуру проекта. Идея переписать сам проект с нуля под систему API была настолько навязчива и привлекательна со стороны, что я уже думал как-бы побыстрее вернуться домой и начать работать над всем этим. Очевидной проблемой являлось то, что мне еще оставалось служить 6 месяцев, но планируемые задачи по Шафту начинались с апреля месяца. Почему так? Я собирался в командировку продолжать службу, но имея при этом ПК. Единственной проблемой было то, что это был военный ПК, но этот вопрос решился, хоть и сложным способом - оказалось что я могу взаимодействовать с удаленными ПК (RDP) при помощи мобильного интернета. В этом месяце я также разбросал ориентировочные цены на новый хост, домен и т.п.

Апрель: я начал ковырять старый движок сайта и писать новый через дедик. Это было крайне утомительно, так как сеть была мобильная и медленная скорость давала о себе знать. Также приходилось чистить ПК от драйверов смарта, флешек каждый вечер чтобы случайно не нарваться на ФСБ. Утомительный месяц выдался, но тогда я набросал первый вариант логотипа.

Май: в этом месяце мало произошло, но я уже был прикомандирован к одному военному субъекту. Главные изменения коснулись frog и сайта в целом. Попутно была внесены градиенты и теги на shaft.im. Ну и разумеется я начал работать над своим SWRP. Само по себе хоть это и РП, но движок для СВРП я начал писать с самого нуля и постарался реализовать уникальные геймплейные фишки.

Июнь: за этот месяц были дописаны базовые функции на новом движке сайта и написан API. Все скрипты дезрана и мардера подверглись рефакторингу из-за нового API и я дорабатывал все это.

Июль: 3 числа был запущен shaft.cc и на первое время все было стабильно. Также был пересобран весь контент проекта, убраны лишние материалы и вырезаны все персональные модели. Они скапливались и уже большая часть контента была занята персональными моделями. 7 числа запущен новый дискорд канал, вместе с ботом @Ed. Функционал был скудный, максимум что умел этот бот - выдавать !ping, но для меня это был важный этап к интеграции некоторых элементов шафта. 10 числа я вернулся домой. 16 июля - официальный день рождения Shaft.CC. Я получил новый логотип от Кокошки. Из функций был добавлен крафт тегов, поддержка кастомных моделей для ножей.

Август: Shaft.CC стал комплексом игровых серверов, обзавелся облачным хранилищем и это позволило решить постоянную нехватку памяти на сервере. Был удален канал в дискорде Shaft.IM. Я начал все сервера модернизировать более углубленно. Также в этом месяце был добавлен редактор бодигрупп и позиционированние для шапок, масок. Базовый движок SWRP был готов именно в этом месяце. plonch1 сделал нам кастомизированные модели Алисы и оружий.

Сентябрь: обзавелись каналом #изменения и теперь все изменения по шафту публикуются там. Сокетная структура была изменена и добавились новые фишки для юзеров, такие как подсчет онлайна, глобальные уведомления и т.д. Был восстановлен дамп lidi.su. В этом месяце я продолжаю пассивную работа с СВРП. Leben–holle оптимизировал Ришимун и теперь используется он.

Октябрь: попытки фиксить API. Устроился на работу программистом и работа над шафтом в целом приостановилась.

Ноябрь: API оказался неспособным принимать какие-то расширительные функции и я начал переписывать API, попутно совмещать с сервером. С шафта ушел Анирон. На его место пришел Nemchiovvv. На сервер шафта я ничего не загружал, взял тестовый, куда и заливались все изменения с новым API, SWRP.

Декабрь: прогрессивный месяц: огромное количество изменений для нового API, подготовка SWRP к выходу Беты 0.6.

Также в какой-то месяц нас покинул Монстр, а недавно, как основатель, присоединился Джез. Он вполне неплохо справляется, хотя многих из администрации не устраивает его политика, но...

За год мардер и дезран не сильно изменились, в плане кода. В основном я работал над СВРП и новым API для Шафта. Поэтому уместно будет упомянуть основные изменения СВРП за все время от апреля до конца декабря:

1.  Написан собственный движок гейммода
2.  Написан собственный худ. immersiveNotifications – самопис, который отнял у меня два-три дня
3.  Добавлена рация
4.  Система персонажей, под завязку
5.  Система прокачки скиллов (пока не введена на полностью, поэтому все создаваемые персонажи обладают максимальной раскачкой изначально)
6.  Система выдачи званий
7.  Система выбора должностей
8.  Система перевода в другие батальоны
9.  Механика определенных функционалов для батальонов
10.  Интеграция и рефакторинг wiltOS Lightsabers
11.  Тестовый функционал для техники (пока не введено, пилоты без активности)
12.  Найдена и реализована возможность расширения базовых анимаций
13.  Повороты головой на ALT
14.  И многие мелочи, которые особо ничем не примечательны, так как есть в базовом DarkRP

Планы таковы, что в следующем году планируется довести SWRP до оптимального, рабочего состояния. Да, выходить обновы для движка будут раз в месяц (по крайней мере пока что). Отслеживать изменения SWRP можно в [Trello](https://trello.com/b/rNwsRuOR). Важным считаю упомянуть, что планируется доработка и добивание нового API. В общем у меня уже появились некоторые задумки по улучшению прогрузки инвентарей и т.п., и прошу прощения, но сейчас сервера будут часто сбоить и выходить из строя, потому что мне нужно собрать данные и проанализировать их в совокупности. Ближайший месяц тут наврядли появится что-то интересное, в ближайшем месяце я буду исправлять большинство багов, которые наплодились за эти пару дней. Также важно полностью восстановить функционал сайта. Из печального хочу отметить, что у меня когда-то была синема. Она имела множество интересных наработок в плане иммерсива, но к сожалению теперь весь этот код лежит в потемках моего облака.

Для чего создан этот блог? Я думаю что здесь буду делиться расширенным девлогом по Шафту, может быть некоторые истории и еще что-нибудь, что явно не вмещается в формат шорткома.

* * *

Ну и напоследок некоторый материал из разработок:

<video controls src="https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/d34a243d-c556-4dd9-b91b-328932a68cd3.mp4"></video>
*Это самый первый набросок панели управления клонами батальона*

<video controls src="https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/306d94a3-6820-4d15-bf5c-6f0a292dab62.mp4"></video>
*Эта гифка демонстрирует повороты головой и интегрированные световые мечи*

<video controls src="https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/f37128c1-314e-4ed5-8c6c-82e34ba55ce0.mp4"></video>
*А это уже иммерсив-уведомления - для меня оказалось сложным сделать их, но ведь получилось? Главное что они вышли, а удобные или нет - решат боевые единицы ShaftSWRP*

![](https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/a998c616-445d-4575-9c19-146c1dca7838.gif)
*Просто пример, как реализован прогресс-бар. Есть явные прогрехи, но пока что будет так.*

![](https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/18d8225c-811d-43f7-9b38-5ee5247fa77e.gif)
*Первое внедрение кастомных анимаций. О боже, это оказалось крайне сложной задачей, но первая анимация - "поднять руки", внедрена.*

![](https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/8ce07323-35ae-4233-a96a-765c6e3c6220.gif)

![](https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/ab71d655-f506-4388-a56e-44e7e4f1f0bb.gif)
*Как реализован механизм брони на движке СВРП, также на последней гифке еще одна кастомная анимация*

![](https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/079a2511-3147-4bf7-951f-347e22b22e3c.gif)
![](https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/224bfa6a-e6b6-4c68-a40b-604c26500104.gif)

*В будущем будет данная тикет-система*

![](https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/44ae0cb8-24a2-4b34-9c51-540613468c65.gif)
![](https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/38b315ac-0823-4117-a5c6-8891df2c76cb.png)
*А это уже мои эксперименты с позициями шапок, масок и прочего и выбора бодигрупп*

![](https://digital-garden.website.yandexcloud.net/images/archives/shaftcc/3f2626d4-064c-4237-a33c-921c50c2a867.gif)
*И просто интересный момент*
